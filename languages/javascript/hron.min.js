/*! hron.js 2015-03-14 */
!function(a){"use strict";function b(a){return"[object Array]"===Object.prototype.toString.call(a)}function c(a){for(var b=10,c=[],d=0;b>d;++d)c.push(a(d));this.get=function(d){return b>d?c[d]:a(d)}}function d(a){for(var b;b=a.currentLine().match(/^!(.*)/);)a.skipLine("PreProcessor",b[1])}function e(a){for(var b,c=r.get(a.currentIndent),d=!1,e=[];!d&&!a.eos();)b=a.currentLine().match(c),b?(e.push(b[1]),a.skipLine("ContentLine",b[1])):(b=a.currentLine().match(p),b?a.skipLine("CommentLine",b[1].length+","+b[2]):(b=a.currentLine().match(q),b?a.skipLine("EmptyLine",b[1]):d=!0));return e.join("\n")}function f(a){var b,c=s.get(a.currentIndent),d=a.currentLine().match(c);return d&&(a.skipLine("Value_Begin",d[1]),b={key:d[1]},a.currentIndent++,b.value=e(a),a.currentIndent--,a.log("Value_End",d[1])),b}function g(a){var b,c=t.get(a.currentIndent),d=a.currentLine().match(c);return d&&(a.skipLine("Object_Begin",d[1]),b={key:d[1]},a.currentIndent++,a.objectStack.push({}),i(a),b.value=a.currentObject(),a.objectStack.pop(),a.currentIndent--,a.log("Object_End",d[1])),b}function h(a,c,d){var e=a.currentObject();b(e[c])?e[c].push(d):e[c]=e[c]?[e[c],d]:d}function i(a){for(var b=!1;!b&&!a.eos();){var c=f(a);if(c)h(a,c.key,c.value);else{var d=g(a);if(d)h(a,d.key,d.value);else{var e=a.currentLine().match(p);e?a.skipLine("Comment",e[1].length+","+e[2]):(e=a.currentLine().match(q),e?a.skipLine("Empty",e[1]):b=!0)}}}}function j(a){this.lines=a.split("\n"),0===this.lines[this.lines.length-1].length&&this.lines.pop(),this.index=0,this.currentIndent=0,this.objectStack=[{}],this.actionLog=null,this.enableLogging=function(){this.actionLog=[]},this.log=function(a,b){a&&this.actionLog&&this.actionLog.push(a+":"+(b||""))},this.currentObject=function(){return this.objectStack[this.objectStack.length-1]},this.currentLine=function(){return this.lines[this.index]},this.skipLine=function(a,b){this.log(a,b),++this.index},this.eos=function(){return this.index>=this.lines.length}}function k(a){var b=a instanceof j?a:new j(a);return d(b),i(b),b.currentObject()}function l(){this.indent="",this.result=[],this.push=function(a){this.result.push(this.indent+a)},this.incIndent=function(){this.indent+="	"},this.decIndent=function(){this.indent=this.indent.substring(0,this.indent.length-1)}}function m(a,c){var d,e=[];for(d in c)e.push(d);e.sort();for(var f=e.length,g=0;f>g;++g){d=e[g];var h=c[d];if(b(h))for(var i=h.length,j=0;i>j;++j)n(a,d,h[j]);else n(a,d,h)}}function n(a,b,c){var d="object"==typeof c?"@":"=";switch(a.push(d+b),a.incIndent(),typeof c){case"string":for(var e=c.split("\n"),f=e.length,g=0;f>g;++g)a.push(e[g]);break;case"object":m(a,c);break;default:c&&a.push(String(c))}a.decIndent()}function o(a){var b=new l;return m(b,a),b.result.join("\n")}var p=new RegExp("^(\\s*)#(.*)"),q=new RegExp("^(\\s*?)\\r?$"),r=new c(function(a){return new RegExp("^\\t{"+a+"}(.*)")}),s=new c(function(a){return new RegExp("^\\t{"+a+"}=(.*)")}),t=new c(function(a){return new RegExp("^\\t{"+a+"}@(.*)")});a.ParseState=j,a.parse=k,a.serialize=o}("undefined"==typeof exports?this.hron={}:exports);