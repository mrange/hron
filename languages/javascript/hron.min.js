/*! hron.js version: 0.8.0 */
!function(a){"use strict";function b(a){return"[object Array]"===Object.prototype.toString.call(a)}function c(a,b){var c,d={};for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c]);return d}function d(a){for(var b=10,c=[],d=0;b>d;++d)c.push(a(d));this.get=function(d){return b>d?c[d]:a(d)}}function e(a){for(var b;b=a.currentLine().match(s);)a.skipLine("PreProcessor",b[1])}function f(a){for(var b,c=t.get(a.currentIndent),d=!1,e=[];!d&&!a.eos();)b=a.currentLine().match(c),b?(e.push(b[1]),a.skipLine("ContentLine",b[1])):(b=a.currentLine().match(q),b?a.skipLine("CommentLine",b[1].length+","+b[2]):(b=a.currentLine().match(r),b?a.skipLine("EmptyLine",b[1]):d=!0));return e.join("\n")}function g(a){var b,c=u.get(a.currentIndent),d=a.currentLine().match(c);return d&&(a.skipLine("Value_Begin",d[1]),b={key:d[1]},++a.currentIndent,b.value=f(a),--a.currentIndent,a.logAction("Value_End",d[1])),b}function h(a){var b,c=v.get(a.currentIndent),d=a.currentLine().match(c);return d&&(a.skipLine("Object_Begin",d[1]),b={key:d[1]},++a.currentIndent,a.objectStack.push({}),j(a),b.value=a.currentObject(),a.objectStack.pop(),--a.currentIndent,a.logAction("Object_End",d[1])),b}function i(a,c,d){var e=a.currentObject();b(e[c])?e[c].push(d):e[c]=e[c]?[e[c],d]:d}function j(a){for(var b=!1;!b&&!a.eos();){var c=g(a);if(c)i(a,c.key,c.value);else{var d=h(a);if(d)i(a,d.key,d.value);else{var e=a.currentLine().match(q);e?a.skipLine("Comment",e[1].length+","+e[2]):(e=a.currentLine().match(r),e?a.skipLine("Empty",e[1]):b=!0)}}}}function k(a,b){var d={actionLog:null},e=c(d,b),f=a.replace(/\n$/,"").split("\n"),g=0;this.currentIndent=0,this.objectStack=[{}],this.logAction=function(a,b){a&&e.actionLog&&e.actionLog.push(a+":"+(b||""))},this.currentObject=function(){return this.objectStack[this.objectStack.length-1]},this.currentLine=function(){return f[g]},this.skipLine=function(a,b){this.logAction(a,b),++g},this.eos=function(){return g>=f.length}}function l(a,b){var c=new k(a,b);return e(c),j(c),c.currentObject()}function m(){this.indent="",this.result=[],this.push=function(a){this.result.push(this.indent+a)},this.incIndent=function(){this.indent+="	"},this.decIndent=function(){this.indent=this.indent.substring(0,this.indent.length-1)}}function n(a,c){var d,e=[];for(d in c)e.push(d);e.sort();for(var f=e.length,g=0;f>g;++g){d=e[g];var h=c[d];if(b(h))for(var i=h.length,j=0;i>j;++j)o(a,d,h[j]);else o(a,d,h)}}function o(a,b,c){var d="object"==typeof c?"@":"=";switch(a.push(d+b),a.incIndent(),typeof c){case"string":for(var e=c.split("\n"),f=e.length,g=0;f>g;++g)a.push(e[g]);break;case"object":n(a,c);break;default:c&&a.push(String(c))}a.decIndent()}function p(a){var b=new m;return n(b,a),b.result.join("\n")}var q=new RegExp("^(\\s*)#(.*)"),r=new RegExp("^(\\s*?)\\r?$"),s=new RegExp("^!(.*)"),t=new d(function(a){return new RegExp("^\\t{"+a+"}(.*)")}),u=new d(function(a){return new RegExp("^\\t{"+a+"}=(.*)")}),v=new d(function(a){return new RegExp("^\\t{"+a+"}@(.*)")});a.parse=l,a.serialize=p}("undefined"==typeof exports?this.hron={}:exports);